<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Style | AI 智能穿搭店</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        /* --- 基礎設定 --- */
        body { font-family: "微軟正黑體", sans-serif; background-color: #f8f9fa; margin: 0; padding-bottom: 80px; }
        header { background: #fff; padding: 20px; text-align: center; box-shadow: 0 2px 10px rgba(0,0,0,0.05); position: sticky; top: 0; z-index: 100; }
        h1 { margin: 0; color: #333; letter-spacing: 2px; }
        
        /* --- 商品列表 --- */
        .container { max-width: 1200px; margin: 30px auto; padding: 0 20px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 30px; }
        
        .card { background: white; border-radius: 15px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.05); transition: 0.3s; }
        .card:hover { transform: translateY(-5px); }
        
        .img-box { height: auto; overflow: hidden; }
        .img-box img { width: 100%; display: block; }
        
        .info { padding: 20px; text-align: center; }
        .title { font-weight: bold; margin-bottom: 10px; }
        .price { color: #e63946; font-weight: bold; font-size: 1.2em; margin-bottom: 15px; }
        
        button.add-btn { background: #333; color: white; border: none; padding: 10px 25px; border-radius: 50px; cursor: pointer; transition: 0.2s; }
        button.add-btn:hover { background: #555; transform: scale(1.05); }

        /* --- 懸浮購物車按鈕 --- */
        .cart-float-btn {
            position: fixed; bottom: 30px; right: 30px;
            background: #e63946; color: white; width: 60px; height: 60px;
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            box-shadow: 0 5px 20px rgba(230, 57, 70, 0.4); cursor: pointer; z-index: 1000; font-size: 24px;
        }
        .cart-count { position: absolute; top: 0; right: 0; background: #333; color: white; font-size: 12px; width: 20px; height: 20px; border-radius: 50%; display: flex; align-items: center; justify-content: center; }

        /* --- 購物車視窗 (Modal) --- */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 2000; }
        .modal-content { 
            background: white; width: 90%; max-width: 500px; margin: 50px auto; 
            border-radius: 15px; padding: 20px; position: relative; max-height: 80vh; overflow-y: auto;
        }
        .close-btn { position: absolute; top: 15px; right: 20px; font-size: 24px; cursor: pointer; }
        
        .cart-item { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #eee; padding: 10px 0; }
        .cart-total { text-align: right; font-size: 1.5em; font-weight: bold; margin-top: 20px; }
        .checkout-btn { width: 100%; background: #333; color: white; padding: 15px; border: none; border-radius: 10px; margin-top: 20px; cursor: pointer; font-size: 1.1em; }

        /* --- AI 聊天機器人 --- */
        .chat-widget {
            position: fixed; bottom: 100px; right: 30px; width: 300px;
            background: white; border-radius: 15px; box-shadow: 0 5px 25px rgba(0,0,0,0.15);
            z-index: 999; overflow: hidden; display: none; /* 預設隱藏 */
            border: 1px solid #eee;
        }
        .chat-header { background: #333; color: white; padding: 15px; font-weight: bold; display: flex; justify-content: space-between; }
        .chat-body { height: 250px; padding: 15px; overflow-y: auto; font-size: 0.9em; background: #f9f9f9; }
        .chat-input-area { display: flex; border-top: 1px solid #eee; }
        .chat-input { flex: 1; border: none; padding: 15px; outline: none; }
        .send-btn { background: #333; color: white; border: none; padding: 0 20px; cursor: pointer; }
        
        .msg { margin-bottom: 10px; padding: 8px 12px; border-radius: 15px; max-width: 80%; }
        .bot-msg { background: #e0e0e0; align-self: flex-start; }
        .user-msg { background: #e63946; color: white; margin-left: auto; text-align: right; }

        .ai-toggle-btn {
            position: fixed; bottom: 30px; right: 100px;
            background: #333; color: white; padding: 10px 20px; border-radius: 30px;
            cursor: pointer; z-index: 1000; box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body>

    <header>
        <h1>MY STYLE SHOP</h1>
        <p>AI 智能穿搭 x 個人選物</p>
    </header>

    <div class="container">
        <div class="grid">
            <div class="card">
                <div class="img-box"><img src="1.jpg" alt="商品"></div>
                <div class="info">
                    <div class="title">韓系多層次穿搭</div>
                    <div class="price">1280</div>
                    <button class="add-btn" onclick="addToCart('韓系多層次穿搭', 1280)">加入購物車</button>
                </div>
            </div>
            <div class="card">
                <div class="img-box"><img src="2.jpg" alt="商品"></div>
                <div class="info">
                    <div class="title">氣質黑色露肩上衣</div>
                    <div class="price">890</div>
                    <button class="add-btn" onclick="addToCart('氣質黑色露肩上衣', 890)">加入購物車</button>
                </div>
            </div>
            <div class="card">
                <div class="img-box"><img src="3.jpg" alt="商品"></div>
                <div class="info">
                    <div class="title">溫柔系白色針織外套</div>
                    <div class="price">1050</div>
                    <button class="add-btn" onclick="addToCart('溫柔系白色針織外套', 1050)">加入購物車</button>
                </div>
            </div>
            <div class="card">
                <div class="img-box"><img src="4.jpg" alt="商品"></div>
                <div class="info">
                    <div class="title">經典格紋圍巾 Look</div>
                    <div class="price">680</div>
                    <button class="add-btn" onclick="addToCart('經典格紋圍巾', 680)">加入購物車</button>
                </div>
            </div>
            <div class="card">
                <div class="img-box"><img src="5.jpg" alt="商品"></div>
                <div class="info">
                    <div class="title">夏日度假風背心</div>
                    <div class="price">790</div>
                    <button class="add-btn" onclick="addToCart('夏日度假風背心', 790)">加入購物車</button>
                </div>
            </div>
            <div class="card">
                <div class="img-box"><img src="6.jpg" alt="商品"></div>
                <div class="info">
                    <div class="title">簡約白T配短裙</div>
                    <div class="price">980</div>
                    <button class="add-btn" onclick="addToCart('簡約白T配短裙', 980)">加入購物車</button>
                </div>
            </div>
            <div class="card">
                <div class="img-box"><img src="7.jpg" alt="商品"></div>
                <div class="info">
                    <div class="title">休閒極簡黑色 T-Shirt</div>
                    <div class="price">590</div>
                    <button class="add-btn" onclick="addToCart('休閒極簡黑色 T-Shirt', 590)">加入購物車</button>
                </div>
            </div>
        </div>
    </div>

    <div class="cart-float-btn" onclick="toggleCart()">
        <i class="fas fa-shopping-cart"></i>
        <div class="cart-count" id="cartCount">0</div>
    </div>

    <div class="ai-toggle-btn" onclick="toggleChat()">
        <i class="fas fa-robot"></i> 問問 AI 顧問
    </div>

    <div id="cartModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="toggleCart()">&times;</span>
            <h2><i class="fas fa-shopping-bag"></i> 您的購物車</h2>
            <div id="cartItems">
                <p style="color:#777; text-align:center;">購物車還是空的喔！</p>
            </div>
            <div class="cart-total">總計: NT$ <span id="cartTotal">0</span></div>
            <button class="checkout-btn" onclick="alert('結帳功能開發中！\n總金額：' + document.getElementById('cartTotal').innerText)">前往結帳</button>
        </div>
    </div>

    <div id="chatWidget" class="chat-widget">
        <div class="chat-header">
            <span>MY STYLE AI 顧問</span>
            <span style="cursor:pointer" onclick="toggleChat()">&times;</span>
        </div>
        <div class="chat-body" id="chatBody">
            <div class="msg bot-msg">哈囉！我是您的穿搭顧問。您可以問我「推薦」、「尺寸」或「優惠」喔！</div>
        </div>
        <div class="chat-input-area">
            <input type="text" id="chatInput" class="chat-input" placeholder="輸入訊息..." onkeypress="handleKeyPress(event)">
            <button class="send-btn" onclick="sendMessage()">送出</button>
        </div>
    </div>

    <script>
        // --- 購物車功能 ---
        let cart = [];

        function addToCart(name, price) {
            // 檢查是否已經在車內
            let existingItem = cart.find(item => item.name === name);
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({ name: name, price: price, quantity: 1 });
            }
            updateCartUI();
            
            // 簡單的動畫回饋
            alert(`已將【${name}】加入購物車！`);
        }

        function removeFromCart(index) {
            cart.splice(index, 1);
            updateCartUI();
        }

        function updateCartUI() {
            const cartItems = document.getElementById('cartItems');
            const cartCount = document.getElementById('cartCount');
            const cartTotal = document.getElementById('cartTotal');
            
            cartItems.innerHTML = '';
            let total = 0;
            let count = 0;

            if (cart.length === 0) {
                cartItems.innerHTML = '<p style="color:#777; text-align:center;">購物車還是空的喔！</p>';
            }

            cart.forEach((item, index) => {
                total += item.price * item.quantity;
                count += item.quantity;
                cartItems.innerHTML += `
                    <div class="cart-item">
                        <div>
                            <strong>${item.name}</strong><br>
                            <small>NT$ ${item.price} x ${item.quantity}</small>
                        </div>
                        <button onclick="removeFromCart(${index})" style="background:none; border:none; color:red; cursor:pointer;">刪除</button>
                    </div>
                `;
            });

            cartCount.innerText = count;
            cartTotal.innerText = total;
        }

        function toggleCart() {
            const modal = document.getElementById('cartModal');
            modal.style.display = modal.style.display === 'block' ? 'none' : 'block';
        }

        // --- AI 聊天機器人功能 ---
        function toggleChat() {
            const chat = document.getElementById('chatWidget');
            chat.style.display = chat.style.display === 'block' ? 'none' : 'block';
        }

        function sendMessage() {
            const input = document.getElementById('chatInput');
            const msg = input.value.trim();
            if (!msg) return;

            // 顯示使用者訊息
            addMsg(msg, 'user-msg');
            input.value = '';

            // AI 自動回覆邏輯 (模擬)
            setTimeout(() => {
                let reply = "抱歉，我還在學習中，不太懂這個意思。";
                
                if (msg.includes("推薦") || msg.includes("穿搭")) {
                    reply = "根據本季流行，我非常推薦我們的「韓系多層次穿搭」和「簡約白T配短裙」，非常適合您的氣質！";
                } else if (msg.includes("尺寸") || msg.includes("大小")) {
                    reply = "我們的版型正常，建議您拿平常穿的尺寸即可。如果不確定，可以參考商品頁的試穿報告。";
                } else if (msg.includes("價錢") || msg.includes("多少")) {
                    reply = "目前所有商品都有優惠價格，您可以直接點擊商品查看！";
                } else if (msg.includes("你好") || msg.includes("嗨")) {
                    reply = "哈囉！今天想找什麼風格的衣服呢？";
                } else if (msg.includes("優惠") || msg.includes("折扣")) {
                    reply = "現在全館滿千免運，而且輸入代碼 'AI2026' 可以再打九折喔！";
                }

                addMsg(reply, 'bot-msg');
                
                // 自動捲動到底部
                const chatBody = document.getElementById('chatBody');
                chatBody.scrollTop = chatBody.scrollHeight;
            }, 600);
        }

        function addMsg(text, className) {
            const chatBody = document.getElementById('chatBody');
            chatBody.innerHTML += `<div class="msg ${className}">${text}</div>`;
        }

        function handleKeyPress(e) {
            if (e.key === 'Enter') sendMessage();
        }
    </script>
</body>
</html>